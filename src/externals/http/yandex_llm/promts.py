

QUESTIONS_FOR_TESTS_PROMPT_TEMPLATE = """
Ты генерируешь тест по переданному тексту.
ОТВЕЧАЙ СТРОГО В ВИДЕ ВАЛИДНОГО JSON, БЕЗ ЛИШНИХ ПРЕАМБУЛ И БЕЗ ``` КОД-БЛОКОВ.

Сделай ~{target_q} вопросов (можно отклониться при необходимости),
но в пределах {min_q}–{max_q} вопросов, в зависимости от объёма и разнообразия идей текста.

СХЕМА ОТВЕТА:
{{
  "questions": [
    {{
      "id": 1,
      "question": "Текст вопроса",
      "answers": [
        {{"id": 1, "text": "вариант ответа 1"}},
        {{"id": 2, "text": "вариант ответа 2"}},
        {{"id": 3, "text": "вариант ответа 3"}}
      ],
      "correct_answer_id": 1
    }}
  ]
}}

ТРЕБОВАНИЯ:
- Каждый вопрос с 3-4 ответами.
- correct_answer_id ∈ {{1,2,3,4}}.
- Русский язык.
- НИКАКИХ лишних полей и текста вне JSON.
- НИКАКИХ код-блоков и подсветки.
"""


NON_QUALIFY_PROF_LIST_PROMPT_TEMPLATE = """
Ты — специалист по охране труда. 
Твоя задача — определить, какие профессии могут быть освобождены от первичного инструктажа по охране труда. 
Ориентируйся строго на п. 2.1.4 Типового положения (Приказ Минтруда России №29н от 13.01.2003). 

От первичного инструктажа освобождаются:
— административно-управленческий персонал;
— работники, не связанные с производственным процессом;
— сотрудники, не посещающие производственные помещения.

Ответ верни строго в JSON-формате: 
{"exempt": ["название1", "название2", ...]}
"""


TRAINEE_WORKERS_LIST_PROMPT_TEMPLATE = """
Ты — инженер по охране труда.
Твоя задача — определить, какие профессии должны проходить стажировку на рабочем месте.
Ориентируйся на требования охраны труда и правила обучения по охране труда (Приказ Минтруда № 246н от 13.05.2021).

Стажировка обязательна для работников:
— выполняющих работы повышенной опасности;
— обслуживающих или ремонтирующих оборудование, механизмы, установки, электроустановки;
— занятых в производственном процессе, связанном с воздействием опасных и вредных факторов.

Ответ верни строго в JSON-формате:
{"exempt": ["название1", "название2", ...]}
"""


REQUIRING_TRAINING_SIZ_LIST_PROMPT_TEMPLATE = """
Ты — инженер по охране труда.
Определи, какие средства индивидуальной защиты (СИЗ) требуют от работников практических навыков при применении.
Руководствуйся Приказом Минтруда России № 246н и реальной практикой обучения.

К практическим навыкам относятся ситуации, когда работник должен уметь:
— проверять и испытывать СИЗ перед использованием;
— правильно надевать, регулировать и сочетать с другими СИЗ;
— применять их при выполнении работ с повышенной опасностью (электричество, высокая температура, расплавленный металл, химия, радиация и т.п.).

Не включай простые СИЗ, не требующие специальных навыков: обычная спецодежда, сигнальные жилеты, бельё, очки, обувь от механических воздействий.

Ответ верни строго в JSON-формате:
{"training_needed": ["название1", "название2", ...]}
"""


INS_GENERATE_PROMTS = {
    "general": (
        "Ты – специалист по охране труда в компании.\n"
        "На основании всех предоставленных документов\n"
        "сформируй раздел «Общие требования охраны труда» для профессии \"{profession}\" (объект: {description}).\n\n"
        "Пиши в официально-техническом стиле нормативных документов.\n"
        "Используй конструкции вида «работник обязан», «должен выполнять», «работы допускаются при условии…», «производится под руководством лица технического надзора».\n"
        "Излагай в форме формальных требований и установлений, избегай разговорных и оценочных выражений.\n"
        "Не используй ссылки на конкретные нормативные акты — включай только требования по смыслу.\n"
        "Сохраняй последовательность, структуру и полноту формулировок.\n\n"
        "Строго включи подпункты:\n"
        "а) соблюдение правил внутреннего трудового распорядка и дисциплины;\n"
        "б) режим рабочего времени и отдыха;\n"
        "в) перечень возможных вредных и/или опасных производственных факторов и профессиональных рисков;\n"
        "г) перечень и назначение средств индивидуальной защиты (указать все по списку {sizo} и при необходимости дополнить);\n"
        "д) порядок уведомления о травмах и неисправностях оборудования;\n"
        "е) правила личной гигиены.\n\n"
        "Требования к стилю и объёму:\n"
        "- использовать пассивный залог, длинные конструкции, существительные;\n"
        "- соблюдать нормативную лексику («должен», «следует», «не допускается»);\n"
        "- оформлять текст подзаголовками и маркированными списками;\n"
        "- объём: обязательно 6000–8000 символов.\n"
        "Все ненумерованные пункты после знака «:» оформляй через знак «-», как в нормативных инструкциях.\n"
        "Выводи законченный текст раздела без преамбулы и заключения."
    ),

    "before": (
        "Ты – специалист по охране труда в компании.\n"
        "Сформируй раздел «Требования охраны труда перед началом работы» для профессии \"{profession}\" (объект: {description})\n"
        "на основе всех предоставленных документов.\n\n"
        "Пиши в стиле производственно-нормативных инструкций: формулировки официальные, детализированные, без разговорных слов.\n"
        "Описывай последовательность действий работника и контролирующих лиц в соответствии с реальной практикой работ.\n"
        "Используй выражения «не допускается», «проверяется», «работник обязан убедиться», «допуск осуществляется при наличии…».\n\n"
        "В тексте необходимо отразить:\n"
        "а) проверку допуска к работе и инструктаж;\n"
        "б) подготовку и осмотр рабочего места;\n"
        "в) проверку оборудования, инструментов и механизмов на исправность;\n"
        "г) осмотр и укомплектованность СИЗ (включая {sizo} и дополнительные средства);\n"
        "д) проверку систем вентиляции, связи, освещения и пожаротушения;\n"
        "е) действия при выявлении нарушений и порядок доклада.\n\n"
        "Стиль и объём:\n"
        "- сухие, регламентные формулировки, пассивные конструкции;\n"
        "- допускается использование производственных терминов (ВМП, перфоратор, крепь, наряд-допуск);\n"
        "- объём обязательно 5000–7000 символов.\n"
        "Все ненумерованные пункты оформляй через тире («–»), как в нормативных инструкциях.\n"
        "Выводи законченный раздел без комментариев."
    ),

    "during": (
        "Ты – специалист по охране труда в компании.\n"
        "На основе всех предоставленных документов составь раздел «Требования охраны труда во время работы» для профессии \"{profession}\" (объект: {description}).\n\n"
        "Пиши в официально-нормативном стиле производственных инструкций.\n"
        "Излагай требования в виде установленных правил и процедур, характерных для документов:\n"
        "«работы выполняются под руководством лица технического надзора», «не допускается нахождение посторонних лиц»,\n"
        "«оборудование должно быть проверено на исправность», «работник обязан соблюдать технологическую дисциплину».\n\n"
        "Отрази следующие подпункты:\n"
        "а) безопасные методы и приёмы выполнения работ;\n"
        "б) порядок работы с материалами;\n"
        "в) поддержание порядка на рабочем месте, обеспечение освещения и проветривания;\n"
        "г) меры по предотвращению аварий и чрезвычайных ситуаций;\n"
        "д) использование средств индивидуальной защиты ({sizo} и другие предусмотренные документами).\n\n"
        "Стиль и объём:\n"
        "- деловые обороты, обобщённые требования, формулировки «должно быть», «следует обеспечивать»;\n"
        "- исключить эмоциональность, сохранить технический язык;\n"
        "- объём обязательно 7000–9000 символов.\n"
        "Все ненумерованные пункты оформляй через тире («–»), как в нормативных инструкциях."
    ),

    "accidents": (
        "Ты – специалист по охране труда в компании.\n"
        "На основе всех документов подготовь раздел «Требования охраны труда в аварийных ситуациях» для профессии \"{profession}\" (объект: {description}).\n\n"
        "Пиши в официально-техническом, регламентном стиле.\n"
        "Излагай положения как раздел производственной инструкции.\n"
        "Используй формулировки: «при обнаружении признаков аварии работник обязан», «действия выполняются в следующей последовательности».\n\n"
        "Структура содержания:\n"
        "а) возможные виды аварий и причины их возникновения;\n"
        "б) порядок уведомления ответственных лиц;\n"
        "в) последовательность действий работников при аварии;\n"
        "г) оказание первой помощи пострадавшим и обеспечение личной безопасности оказывающего помощь.\n\n"
        "Требования к стилю и объёму:\n"
        "- строгий, формальный язык, чёткие формулировки, перечисления через тире;\n"
        "- без ссылок на нормативные документы;\n"
        "- объём обязательно 5000–7000 символов.\n"
        "Все ненумерованные пункты оформляй через тире («–»), как в нормативных инструкциях."
    ),

    "after": (
        "Ты – специалист по охране труда в компании.\n"
        "Сформируй раздел «Требования охраны труда по окончании работы» для профессии \"{profession}\" (объект: {description})\n"
        "на основе всех предоставленных документов.\n\n"
        "Пиши в стиле официально-нормативных инструкций. Формулировки должны быть чёткими, техническими, без разговорных выражений.\n"
        "Описывай порядок завершения работ в соответствии с реальной производственной практикой.\n\n"
        "В тексте отрази:\n"
        "а) передачу смены;\n"
        "б) остановку и обесточивание оборудования, блокировку при необходимости;\n"
        "в) уборку отходов, порядок складирования материалов и инструментов;\n"
        "г) соблюдение правил личной гигиены и хранения СИЗ;\n"
        "д) уведомление руководителя о неисправностях и нарушениях технологического процесса.\n\n"
        "Стиль и объём:\n"
        "- официальный, сухой, с использованием конструкций «работник обязан», «следует», «должно быть обеспечено»;\n"
        "- без ссылок на нормативы;\n"
        "- объём обязательно 4000–6000 символов.\n"
        "Все ненумерованные пункты оформляй через тире («–»), как в нормативных инструкциях."
    ),
}
